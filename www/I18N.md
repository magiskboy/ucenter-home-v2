# Hướng dẫn i18n (đa ngôn ngữ)

Dự án đã được cấu trúc theo locale (locale code: **vi_VN** cho Tiếng Việt). Các file tiếng Trung được copy sang thư mục `vi_VN` làm **mock** — bạn chỉ cần sửa value trong các file `vi_VN` thành tiếng Việt.

## Chuyển sang Tiếng Việt

### 1. UCenter (`www/ucenter/`)

- Sửa file **`www/ucenter/data/config_lang.php`**: đổi `'zh_CN'` thành `'vi_VN'`.
- File ngôn ngữ Tiếng Việt (mock, cần dịch):  
  `www/ucenter/view/default/lang/vi_VN/`  
  - `main.lang.php`, `templates.lang.php`, `messages.lang.php`, `admin.lang.php`

### 2. UCHome (`www/home/`)

- Sửa file **`www/home/config.php`**: đổi `$_SC['language'] = 'zh_CN'` thành `$_SC['language'] = 'vi_VN'`.
- **Quan trọng:** Giao diện menu, nút, nhãn (Trang chủ, Bạn bè, Cá nhân, …) nằm trong **template**, không chỉ file lang. Khi `$_SC['language'] = 'vi_VN'`, hệ thống tự dùng bộ template **`www/home/template/vi_VN/`** (nếu có). Đã tạo sẵn `template/vi_VN/` (copy từ `default`) và dịch một phần; bạn có thể sửa thêm chuỗi tiếng Trung trong các file `.htm` trong `template/vi_VN/`.
- File ngôn ngữ (tin nhắn, câu thông báo):  
  `www/home/language/vi_VN/`  
  - `lang_showmessage.php`, `lang_source.php`, `lang_cp.php`, `lang_cpmessage.php`, `lang_exif.php`
- **Cache:** Nếu sau khi đổi sang `vi_VN` mà vẫn thấy tiếng Trung, xóa cache template: xóa hoặc làm trống thư mục `www/home/data/tpl_cache/` rồi tải lại trang.
- **Docker:** Chỉ có `config.php` được mount; `common.php` và `template/vi_VN/` lấy từ **image**. Sau khi sửa code hoặc template, cần **build lại image**: `docker compose build uchome` rồi `docker compose up -d uchome`. Sau đó có thể xóa cache trong container: `docker exec uchome rm -rf /var/www/home/data/tpl_cache/*`. Kiểm tra nhanh: mở `http://localhost:8080/home/check_i18n.php` để xem language, đường dẫn template và file vi_VN có tồn tại không.

### 3. BBS / Discuz (`www/bbs/`)

- Sửa file **`www/bbs/config.inc.php`**: đổi `$dzz_lang = 'zh_CN'` thành `$dzz_lang = 'vi_VN'`.
- File ngôn ngữ Tiếng Việt (mock):  
  `www/bbs/templates/default/lang/vi_VN/`  
  - Toàn bộ file `*.lang.php` (misc, templates, messages, actions, admincp, …).

## Cấu trúc thư mục

```
www/ucenter/view/default/lang/
  zh_CN/   ← tiếng Trung (gốc)
  vi_VN/   ← mock Tiếng Việt (sửa value thành tiếng Việt)

www/home/language/
  zh_CN/   ← tiếng Trung (đã copy từ gốc)
  vi_VN/   ← mock Tiếng Việt

www/home/template/
  default/ ← tiếng Trung (gốc)
  vi_VN/   ← bộ template Tiếng Việt (dùng khi config language = vi_VN)

www/bbs/templates/default/lang/
  zh_CN/   ← tiếng Trung (đã copy từ gốc)
  vi_VN/   ← mock Tiếng Việt
```

## Lưu ý

- Giữ nguyên **key** trong mảng, chỉ thay **value** bằng bản dịch tiếng Việt.
- Mã hóa file: UTF-8.
- Locale code Tiếng Việt dùng **vi_VN** (chuẩn).
- Nếu thiếu file cho locale `vi_VN`, hệ thống tự fallback về `zh_CN`.
